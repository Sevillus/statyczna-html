<!doctype html>
<html lang="pl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Moja Strona — Demo</title>
    <meta name="description" content="Przykładowa strona główna z Bootstrap i dynamiczną listą z API." />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        :root{
            --radius: 14px;
            --shadow: 0 8px 30px rgba(0,0,0,.08);
        }
        body{
            font-feature-settings:"liga" 1,"kern" 1;
            text-rendering:optimizeLegibility;
        }
        /* Pasek nawigacji */
        .navbar{
            backdrop-filter: saturate(180%) blur(8px);
            background: rgba(255,255,255,.85);
            box-shadow: 0 2px 10px rgba(0,0,0,.06);
        }
        /* Hero */
        .hero{
            background: linear-gradient(135deg, #f8f9fa 0%, #eef4ff 100%);
            border-bottom: 1px solid rgba(0,0,0,.06);
            padding-top: 6rem;
            padding-bottom: 3rem;
        }
        .hero .lead{
            font-size: 1.15rem;
            color: #4b5563;
        }
        .hero-img{
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            width: 100%;
            height: auto;
            object-fit: cover;
            aspect-ratio: 4/3;
        }
        /* Karty listy */
        .card{
            border: 1px solid rgba(0,0,0,.06);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            height: 100%;
        }
        .card-img-top{
            aspect-ratio: 16/9;
            object-fit: cover;
        }
        /* Loader */
        .skeleton{
            background: linear-gradient(90deg, #f2f4f7 25%, #e5e7eb 37%, #f2f4f7 63%);
            background-size: 400% 100%;
            animation: shimmer 1.4s ease-in-out infinite;
            border-radius: 10px;
        }
        @keyframes shimmer{
            0%{background-position: 100% 0}
            100%{background-position: -100% 0}
        }
        /* Stopka */
        footer{
            background: #0b1220;
            color: #cbd5e1;
            padding: 2.5rem 0;
            margin-top: 3rem;
        }
        footer a{ color:#e2e8f0; text-decoration: none; }
        footer a:hover{ text-decoration: underline; }
    </style>
</head>
<body>
<!-- Nawigacja -->
<nav class="navbar navbar-expand-lg fixed-top">
    <div class="container">
        <a class="navbar-brand fw-bold" href="#">TwojaMarka</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Przełącz nawigację">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="mainNav">
            <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-2">
                <li class="nav-item"><a class="nav-link" href="#o-nas">O nas</a></li>
                <li class="nav-item"><a class="nav-link" href="#lista">Galeria z API</a></li>
                <li class="nav-item"><a class="btn btn-primary ms-lg-2" href="#kontakt">Kontakt</a></li>
            </ul>
        </div>
    </div>
</nav>

<!-- Sekcja hero (2 kolumny: opis + obraz) -->
<section class="hero" id="o-nas">
    <div class="container">
        <div class="row align-items-center g-4">
            <div class="col-12 col-lg-6">
                <h1 class="display-5 fw-bold mb-3">Piękna strona startowa z <span class="text-primary">Bootstrap</span></h1>
                <p class="lead mb-4">
                    To jest przykładowa sekcja z opisem po lewej i zdjęciem po prawej (układ <code>col-lg-6 / col-lg-6</code>).
                    Poniżej znajdziesz dynamiczną listę elementów pobraną z publicznego API — każdy element zawiera obraz oraz krótki opis.
                </p>
                <div class="d-flex gap-2">
                    <a href="#lista" class="btn btn-primary btn-lg">Zobacz listę</a>
                    <a href="#kontakt" class="btn btn-outline-secondary btn-lg">Skontaktuj się</a>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <img class="hero-img" src="https://images.unsplash.com/photo-1522071820081-009f0129c71c?q=80&w=1400&auto=format&fit=crop" alt="Zespół pracujący przy komputerach" loading="lazy">
            </div>
        </div>
    </div>
</section>

<!-- Dynamiczna lista z API -->
<section class="py-5" id="lista" aria-labelledby="lista-heading">
    <div class="container">
        <div class="d-flex align-items-center justify-content-between mb-3">
            <h2 id="lista-heading" class="h3 mb-0">Galeria z API</h2>
            <div class="d-flex gap-2">
                <button id="reloadBtn" class="btn btn-outline-primary btn-sm">Przeładuj</button>
            </div>
        </div>
        <p class="text-muted mb-4">Poniższe karty są ładowane dynamicznie z publicznego API (<code>jsonplaceholder.typicode.com</code>).</p>

        <!-- Loader: szkielety -->
        <div id="loader" class="row g-4">
            <!-- 6 skeletonów dla lepszego UX -->
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="skeleton" style="height: 220px;"></div>
            </div>
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="skeleton" style="height: 220px;"></div>
            </div>
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="skeleton" style="height: 220px;"></div>
            </div>
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="skeleton" style="height: 220px;"></div>
            </div>
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="skeleton" style="height: 220px;"></div>
            </div>
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="skeleton" style="height: 220px;"></div>
            </div>
        </div>

        <!-- Grid z kartami -->
        <div id="cardsGrid" class="row g-4" hidden></div>

        <!-- Komunikaty -->
        <div id="statusMsg" class="text-center text-muted mt-3" role="status" aria-live="polite"></div>
    </div>
</section>

<!-- Stopka -->
<footer id="kontakt">
    <div class="container">
        <div class="row gy-3 align-items-center">
            <div class="col-12 col-md-6">
                <strong>TwojaMarka</strong> — © <span id="year"></span>. Wszelkie prawa zastrzeżone.
            </div>
            <div class="col-12 col-md-6 text-md-end">
                <a href="#o-nas" class="me-3">O nas</a>
                <a href="#lista" class="me-3">Galeria</a>
                <a href="mailto:kontakt@twojamarka.pl">kontakt@twojamarka.pl</a>
            </div>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script>
    // Ustaw rok w stopce
    document.getElementById('year').textContent = new Date().getFullYear();

    // Elementy interfejsu
    const loader = document.getElementById('loader');
    const grid = document.getElementById('cardsGrid');
    const statusMsg = document.getElementById('statusMsg');
    const reloadBtn = document.getElementById('reloadBtn');

    // API: Picsum (zamiast JSONPlaceholder)
    const API_URL = 'https://picsum.photos/v2/list?limit=12';
    const CACHE_KEY = 'demo_api_items_picsum_v1';

    async function fetchItems(){
        statusMsg.textContent = '';
        grid.hidden = true;
        loader.style.display = '';

        try{
            const cached = sessionStorage.getItem(CACHE_KEY);
            if(cached){
                renderCards(JSON.parse(cached));
                return;
            }

            const res = await fetch(API_URL, { cache: 'no-store' });
            if(!res.ok) throw new Error('Błąd sieci: ' + res.status);
            const data = await res.json();

            sessionStorage.setItem(CACHE_KEY, JSON.stringify(data));
            renderCards(data);
        }catch(err){
            console.error(err);
            statusMsg.textContent = 'Nie udało się pobrać danych. Sprawdź połączenie i spróbuj ponownie.';
            loader.style.display = 'none';
        }
    }

    function renderCards(items){
        grid.innerHTML = items.map(item => {
            // Miniatury i link do większego obrazka z Picsum
            const thumb = `https://picsum.photos/id/${item.id}/600/338`;
            const full  = `https://picsum.photos/id/${item.id}/1600/900`;
            const title = escapeHtml(item.author || 'Autor nieznany');

            return `
        <div class="col-12 col-sm-6 col-lg-4">
          <article class="card h-100">
            <img class="card-img-top"
                 src="${thumb}"
                 alt="Zdjęcie od ${title}"
                 loading="lazy"
                 referrerpolicy="no-referrer"
                 onerror="this.onerror=null;this.src='data:image/svg+xml;utf8,${encodeURIComponent(placeholderSVG(title))}';">
            <div class="card-body d-flex flex-column">
              <h3 class="h6 card-title mb-2">${title}</h3>
              <p class="card-text text-muted mb-3">ID: ${item.id}</p>
              <a class="btn btn-sm btn-primary mt-auto" href="${full}" target="_blank" rel="noopener">Otwórz obraz</a>
            </div>
          </article>
        </div>
      `;
        }).join('');

        loader.style.display = 'none';
        grid.hidden = false;
        statusMsg.textContent = items.length ? '' : 'Brak danych do wyświetlenia.';
    }

    // Prosty placeholder SVG gdy obrazek nie wczyta się
    function placeholderSVG(text){
        return `
      <svg xmlns='http://www.w3.org/2000/svg' width='600' height='338'>
        <rect width='100%' height='100%' fill='#e5e7eb'/>
        <text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-family='system-ui, sans-serif' font-size='18' fill='#6b7280'>
          Obraz niedostępny — ${text}
        </text>
      </svg>`;
    }

    // Pomocnicze
    function escapeHtml(str){
        return String(str).replace(/[&<>"']/g, (m) => ({
            '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'
        }[m]));
    }

    // Przycisk przeładowania
    reloadBtn.addEventListener('click', () => {
        sessionStorage.removeItem(CACHE_KEY);
        fetchItems();
    });

    // Start
    fetchItems();
</script>

</body>
</html>
